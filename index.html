<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eli Gift</title>
  <!-- Fuente personalizada y favicon -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700&display=swap" rel="stylesheet">
  <style>
    /* RESET y estilos globales */
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body, html {
  font-family: 'Raleway', sans-serif;
  background: #ffffff;
  color: #333;
  overflow-x: hidden;
  text-align: center; /* Centra por defecto el contenido inline */
}

/* Cabecera fija con fondo blanco */
header {
  background: #fff;
  display: flex;
  align-items: flex-end;
  justify-content: flex-end; /* no centrada el contenido en la cabecera */
  padding: 15px 30px;
  position: fixed;
  width: 100%;
  top: 0;
  z-index: 1000;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
/* Botón menú estilo hamburguesa */
.menu-btn {
  background: none;
  border: none;
  cursor: pointer;
  outline: none;
}
.menu-icon {
  width: 30px;
  height: 3px;
  background-color: #e60073;
  display: block;
  position: relative;
  transition: all 0.3s ease;
}
.menu-icon::before,
.menu-icon::after {
  content: '';
  width: 30px;
  height: 3px;
  background-color: #e60073;
  position: absolute;
  left: 0;
  transition: all 0.3s ease;
}
.menu-icon::before {
  top: -10px;
}
.menu-icon::after {
  top: 10px;
}

/* Menú lateral desplegable */
nav {
  position: fixed;
  top: 60px;
  right: -250px;
  background: #fff;
  width: 220px;
  box-shadow: -2px 0 5px rgba(0,0,0,0.1);
  transition: right 0.3s ease;
  padding: 20px;
  border-radius: 0 0 0 5px;
  z-index: 999;
}
nav ul {
  list-style: none;
  text-align: left; /* Centra los enlaces del menú */
}
nav ul li {
  margin-bottom: 15px;
}
nav ul li a {
  text-decoration: none;
  color: #e60073;
  font-weight: 600;
  transition: color 0.3s;
}
nav ul li a:hover {
  color: #b3004b;
}
nav.show {
  right: 0;
}

/* Carrusel Banner */
.carousel {
  margin-top: 150px; /* espacio para la cabecera fija */
  position: relative;
  overflow: hidden;
  width: 100%;
  background: #fff;
}
.carousel-inner {
  display: flex;
  transition: transform 0.5s ease-in-out;
}
.carousel-item {
  min-width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.carousel-item img {
  width: 100%;
  height: 400px; /* Ajusta la altura según tus necesidades */
  object-fit: cover;
  border: none;
  box-shadow: none;
  transition: transform 0.3s;
  top: 20px;
}
.carousel-item img:hover {
  transform: scale(1.05);
}
.carousel-control {
  position: absolute;
  top: 40%;
  transform: translateY(-50%);
  background: rgba(255,255,255,0.8);
  border: none;
  font-size: 24px;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: background 0.3s;
  z-index: 5;
}
.carousel-control:hover {
  background: rgba(255,255,255,1);
}
.carousel-control.left {
  left: 20px;
}
.carousel-control.right {
  right: 20px;
}

/* Contenido principal */
.content {
  padding: 40px 20px;
  text-align: center;
}
.content h1 {
  color: #e60073;
  margin-bottom: 20px;
  font-size: 2.5em;
}
.content p {
  font-size: 18px;
  line-height: 1.6;
  margin-bottom: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

/* Footer */
footer {
  background: #ffe6f2;
  padding: 20px;
  text-align: center;
  color: #e60073;
  font-weight: 600;
}

/* Media Queries para responsividad */
@media (max-width: 768px) {
  header {
    padding: 10px 20px;
  }
  .menu-icon {
    width: 25px;
  }
  nav {
    width: 200px;
    top: 50px;
  }
  .content h1 {
    font-size: 2em;
  }
  .content p {
    font-size: 16px;
  }
  .carousel-item img {
    height: 300px;
  }
}
@media (max-width: 480px) {
  .carousel-control {
    width: 35px;
    height: 35px;
    font-size: 20px;
  }
  .carousel-item img {
    height: 250px;
  }
}

/* Enlaces de la cabecera centrados */
.header-links {
  display: flex;
  gap: 20px;
  align-items: center;
  justify-content: center;
}
.header-links a {
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  color: #e60073;
  font-weight: 600;
  transition: color 0.3s;
  gap: 8px;
}
.header-links a:hover {
  color: #b3004b;
}
.header-links svg {
  flex-shrink: 0;
}

/* Botón flotante de Contacto con diseño mejorado */
.floating-contact {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: linear-gradient(135deg, #e60073, black);
  color: #fff;
  padding: 12px 20px;
  border-radius: 50px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  z-index: 2000;
}
.floating-contact:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.4);
}
.floating-contact svg {
  flex-shrink: 0;
}

/* Estilos para filas alternadas de fotos y textos */
.alternating-row {
  display: flex;
  align-items: center;
  margin: 20px 0;
  justify-content: center; /* Centra la fila */
}
.alternating-row:nth-child(even) {
  flex-direction: row-reverse;
}
.foto, .texto {
  flex: 1;
  padding: 10px;
  text-align: center; /* Centra el contenido de cada columna */
}
.foto img {
  max-width: 100%;
  height: auto;
  max-width: 300px;
  margin: 0 auto; /* Centra la imagen */
}
/* Estilos para el carrito */
.cart-container {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  margin-right: 20px;
}

.cart-icon {
  width: 24px;
  height: 24px;
}

.cart-count {
  background: #e60073;
  color: #fff;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 50%;
  margin-left: 5px;
}

/* Estilos para el botón de menú */
.menu-btn {
  background: none;
  border: none;
  cursor: pointer;
  outline: none;
}

.menu-icon {
  width: 30px;
  height: 3px;
  background-color: #e60073;
  display: block;
  position: relative;
  transition: all 0.3s ease;
}

.menu-icon::before,
.menu-icon::after {
  content: '';
  width: 30px;
  height: 3px;
  background-color: #e60073;
  position: absolute;
  left: 0;
  transition: all 0.3s ease;
}

.menu-icon::before {
  top: -10px;
}

.menu-icon::after {
  top: 10px;
}

/* Estilos para el carrito */
.cart-container {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  margin-right: 20px;
}

.cart-icon {
  width: 24px;
  height: 24px;
}

.cart-count {
  background: #e60073;
  color: #fff;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 50%;
  margin-left: 5px;
}

/* Estilos para el botón de menú */
.menu-btn {
  background: none;
  border: none;
  cursor: pointer;
  outline: none;
}

.menu-icon {
  width: 30px;
  height: 3px;
  background-color: #e60073;
  display: block;
  position: relative;
  transition: all 0.3s ease;
}

.menu-icon::before,
.menu-icon::after {
  content: '';
  width: 30px;
  height: 3px;
  background-color: #e60073;
  position: absolute;
  left: 0;
  transition: all 0.3s ease;
}

.menu-icon::before {
  top: -10px;
}

.menu-icon::after {
  top: 10px;
}

/* Estilos para el modal de factura */
#invoiceContainer {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #fff;
  padding: 20px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  z-index: 2000;
}

#invoiceContainer h2 {
  margin-bottom: 10px;
}

#invoiceContainer table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 15px;
}

#invoiceContainer table, 
#invoiceContainer th, 
#invoiceContainer td {
  border: 1px solid #ccc;
}

#invoiceContainer th, 
#invoiceContainer td {
  padding: 8px;
  text-align: left;
}

#invoiceContainer button {
  margin-top: 15px;
  padding: 8px 12px;
  background: #e60073;
  color: #fff;
  border: none;
  cursor: pointer;
}
  </style>
</head>
<body>
  <!-- Cabecera -->
  <header>
    <div class="cart-container" onclick="window.location.href='carrito.html'">
      <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#e60073" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span class="cart-count">0</span>
    </div>
    
    <button class="menu-btn" onclick="toggleMenu()">
      <span class="menu-icon"></span>
    </button>
  </header>
  
    <style>
      body {
        background-image: url('images/images.jpg');
        background-size: cover;
        background-repeat: no-repeat;
        background-position: center center;
        background-attachment: fixed; /* La imagen se queda fija mientras el contenido se desplaza */
      }
      body {
  background: 
    linear-gradient(rgba(255,255,255,0.5), rgba(255,255,255,0.5)), /* Capa blanca semitransparente */
    url('images/images.jpg') center center/cover no-repeat fixed;
  background-blend-mode: lighten; /* Mezcla la capa blanca con la imagen para aclararla */
}

    </style>
    

  </header>
  
  <!-- Menú lateral desplegable -->
  <nav id="dropdownMenu">
    <!-- Se cargará dinámicamente -->
  </nav>
  
  <!-- Contenedor para el logo (cargado desde Airtable) -->
  <div id="bannerLogo" class="banner-logo" style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10;">
    <!-- Aquí se insertará el logo -->
  </div>
  
  <!-- Carrusel Banner -->
  <div class="carousel" style="position: relative;">
    <!-- Controles del carrusel -->
    <button class="carousel-control left" onclick="prevSlide()">&#10094;</button>
    <div class="carousel-inner" id="carouselInner">
      <!-- Imágenes de portada se inyectan desde Airtable -->
      <div class="carousel-item">
        <img src="https://via.placeholder.com/300/FFC0CB/FFFFFF?text=Imagen+1" alt="Imagen 1">
      </div>
      <div class="carousel-item">
        <img src="https://via.placeholder.com/300/FFC0CB/FFFFFF?text=Imagen+2" alt="Imagen 2">
      </div>
      <div class="carousel-item">
        <img src="https://via.placeholder.com/300/FFC0CB/FFFFFF?text=Imagen+3" alt="Imagen 3">
      </div>
    </div>
    <button class="carousel-control right" onclick="nextSlide()">&#10095;</button>
  </div>
  
  <!-- Contenido principal -->
  <div class="content">
    <h1>Bienvenidos a Nuestra Tienda de Personalización</h1>
    <p>
      Aquí encontrarás productos únicos y hechos a medida: botellas, llaveros y regalos sorpresa personalizados con detalle y mucho amor. Descubre la magia de tener un artículo que refleje tu estilo.
    </p>
  </div>
  
  <!-- Nuevo contenedor para las filas alternadas de fotos y textos -->
  <div id="alternatingContent"></div>
  
  <!-- Footer -->
  <footer>
    &copy; 2025   ♥Detalles que cuentan historias♥.
  </footer>
  
  <!-- Botón flotante de Contacto con diseño mejorado -->
  <a href="contacto.html" class="floating-contact">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <rect x="2" y="3" width="20" height="18" rx="2" ry="2"></rect>
      <path d="M2 3l10 9 10-9"></path>
    </svg>
    <span>Contacto</span>
  </a>

  <script>
    // Función para alternar el menú lateral
    function toggleMenu() {
      const menu = document.getElementById('dropdownMenu');
      menu.classList.toggle('show');
    }
    
    // Variables para el carrusel
    let currentSlide = 0;
    const carouselInner = document.getElementById('carouselInner');
    let totalSlides = document.querySelectorAll('.carousel-item').length;
    
    function showSlide(index) {
      if (index >= totalSlides) {
        currentSlide = 0;
      } else if (index < 0) {
        currentSlide = totalSlides - 1;
      } else {
        currentSlide = index;
      }
      carouselInner.style.transform = 'translateX(' + (-currentSlide * 100) + '%)';
    }
    function updateCartCount() {
  const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
  document.querySelector('.cart-count').textContent = cartItems.length;
}

// Llama a esta función cuando se cargue la página
document.addEventListener('DOMContentLoaded', updateCartCount);

    function nextSlide() {
      showSlide(currentSlide + 1);
    }
    
    function prevSlide() {
      showSlide(currentSlide - 1);
    }
    
    // Función para cargar datos desde Airtable (logo, carrusel, menú)
    async function loadCarouselImages() {
      const airtableApiKey = 'patygcsH0vq1IXBGs.2ba9bfa1d43b68cd1b2c95d0d799e97038e80ab9388d6f87e071efbe6ec18bd4';
      const baseId = 'appx4eD3f7NINswZW';
      
      // Lee el parámetro "tabla" desde la URL; si no existe, usa 'Eli Gift' por defecto
      const urlParams = new URLSearchParams(window.location.search);
      const tableName = urlParams.get('tabla') || 'Eli Gift';
      console.log("Cargando imágenes para la tabla:", tableName);
      
      // Construye la URL de consulta usando el nombre de tabla obtenido
      const url = `https://api.airtable.com/v0/${baseId}/${encodeURIComponent(tableName)}?fields[]=portada&fields[]=logo&fields[]=menu`;
      console.log("URL de consulta:", url);
      
      try {
        const response = await fetch(url, {
          headers: {
            Authorization: 'Bearer ' + airtableApiKey
          }
        });
        const data = await response.json();
        
        // Referencias a los contenedores
        const bannerLogo = document.getElementById('bannerLogo');
        const carouselInner = document.getElementById('carouselInner');
        const dropdownMenu = document.getElementById('dropdownMenu');
        
        // Limpia contenidos previos
        bannerLogo.innerHTML = "";
        carouselInner.innerHTML = "";
        dropdownMenu.innerHTML = "";
        
        if (data && data.records && data.records.length > 0) {
          // 1) Logo: inserta el logo del primer registro que lo tenga
          data.records.forEach(record => {
            if (record.fields.logo && Array.isArray(record.fields.logo) && record.fields.logo.length > 0 && bannerLogo.innerHTML === "") {
              const logoImg = document.createElement('img');
              logoImg.src = record.fields.logo[0].url;
              logoImg.alt = 'Logo';
              logoImg.style.width = '150px';
              bannerLogo.appendChild(logoImg);
            }
          });
          
          // 2) Carrusel: inserta todas las imágenes de portada de todos los registros
          data.records.forEach(record => {
            if (record.fields.portada && Array.isArray(record.fields.portada)) {
              record.fields.portada.forEach(image => {
                const carouselItem = document.createElement('div');
                carouselItem.className = 'carousel-item';
                const img = document.createElement('img');
                img.src = image.url;
                img.alt = record.fields.name || 'Imagen de portada';
                carouselItem.appendChild(img);
                carouselInner.appendChild(carouselItem);
              });
            }
          });
          
          // 3) Menú: recolecta el campo "menu" de TODOS los registros y construye el menú sin duplicados
          let menuItems = [];
          data.records.forEach(record => {
            if (record.fields.menu) {
              let items = [];
              if (record.fields.menu.indexOf('\n') !== -1) {
                items = record.fields.menu.split('\n')
                  .map(item => item.trim())
                  .filter(item => item !== "");
              } else {
                items = [record.fields.menu.trim()];
              }
              menuItems = menuItems.concat(items);
            }
          });
          // Elimina duplicados (ignorando mayúsculas/minúsculas)
          menuItems = menuItems.filter((item, index, self) =>
            index === self.findIndex(t => t.toLowerCase() === item.toLowerCase())
          );
          // Elimina todas las apariciones de "Sobre Nosotros" y agrégalo solo al inicio
          menuItems = menuItems.filter(item => item.toLowerCase() !== "sobre nosotros");
          menuItems.unshift("Sobre Nosotros");
  
          const ul = document.createElement('ul');
          menuItems.forEach(menuItem => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            if (menuItem === 'Contacto') {
              a.href = 'contacto.html';
            } else if (menuItem === 'Sobre Nosotros') {
              a.href = 'about.html';
            } else {
              a.href = 'contenido.html?tabla=' + encodeURIComponent(menuItem);
            }
            a.textContent = menuItem;
            li.appendChild(a);
            ul.appendChild(li);
          });
          dropdownMenu.appendChild(ul);
          
          // Configura el carrusel
          totalSlides = document.querySelectorAll('.carousel-item').length;
          if (totalSlides > 0) {
            showSlide(0);
          } else {
            carouselInner.innerHTML = "<p style='text-align:center;width:100%;'>No se encontraron imágenes.</p>";
          }
        } else {
          console.error("No se encontraron registros en la respuesta de Airtable.");
          carouselInner.innerHTML = "<p style='text-align:center;width:100%;'>No se encontraron imágenes.</p>";
        }
      } catch (error) {
        console.error('Error al cargar datos desde Airtable:', error);
        document.getElementById('carouselInner').innerHTML = "<p style='text-align:center;width:100%; color:red;'>Error al cargar imágenes.</p>";
      }
    }
    
    document.addEventListener('DOMContentLoaded', loadCarouselImages);

    
  </script>

<script>
  function showInvoice() {
  window.location.href = "factura.html";
}

  // Función para cargar contenido alternado (fotos, subtítulos y textos) desde Airtable
  async function loadAlternatingContent() {
    const airtableApiKey = 'patygcsH0vq1IXBGs.2ba9bfa1d43b68cd1b2c95d0d799e97038e80ab9388d6f87e071efbe6ec18bd4';
      const baseId = 'appx4eD3f7NINswZW';
    const tableName = 'Eli Gift';
    const url = `https://api.airtable.com/v0/${baseId}/${encodeURIComponent(tableName)}?fields[]=Fotos&fields[]=Subtitulos&fields[]=Textos`;
    
    try {
      const response = await fetch(url, {
        headers: {
          Authorization: 'Bearer ' + airtableApiKey
        }
      });
      const data = await response.json();
      
      const container = document.getElementById('alternatingContent');
      // Limpia el contenedor antes de insertar nuevos elementos
      container.innerHTML = "";
      
      data.records.forEach(record => {
        const fields = record.fields;
        // Crear la fila
        const row = document.createElement('div');
        row.className = 'alternating-row';
        
        // Columna de la foto
        const imgDiv = document.createElement('div');
        imgDiv.className = 'foto';
        const img = document.createElement('img');
        img.src = (fields.Fotos && fields.Fotos[0].url) || '';

        img.alt = fields.Subtitulos || '';
        imgDiv.appendChild(img);
        
        // Columna de texto (subtítulo y párrafo)
        const textDiv = document.createElement('div');
        textDiv.className = 'texto';
        const title = document.createElement('h2');
        title.textContent = fields.Subtitulos || '';
        const p = document.createElement('p');
        p.textContent = fields.Textos || '';
        textDiv.appendChild(title);
        textDiv.appendChild(p);
        
        // Agregar columnas a la fila y la fila al contenedor
        row.appendChild(imgDiv);
        row.appendChild(textDiv);
        container.appendChild(row);
      });
    } catch (error) {
      console.error("Error al cargar el contenido alternado:", error);
    }
  }
  
  // Llama a la función una vez que el DOM esté completamente cargado
  document.addEventListener('DOMContentLoaded', loadAlternatingContent);
</script>

</body>
</html>